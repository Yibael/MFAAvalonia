# MFAAvalonia å®Œæ•´ä½¿ç”¨æŒ‡å—

## ğŸ¯ é¡¹ç›®ç®€ä»‹

**MFAAvalonia** æ˜¯ä¸€ä¸ªåŸºäº Avalonia UI æ¡†æ¶çš„ MAAFramework é€šç”¨å›¾å½¢ç•Œé¢é¡¹ç›®ã€‚å®ƒæä¾›äº†ä¸€ä¸ªç°ä»£åŒ–çš„è·¨å¹³å°æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œç”¨äºè¿è¡ŒåŸºäº MAAFramework çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚

### ä¸»è¦ç‰¹æ€§
- ğŸ–¥ï¸ **è·¨å¹³å°æ”¯æŒ** - Windowsã€Linuxã€macOS
- ğŸ¨ **ç°ä»£åŒ–ç•Œé¢** - åŸºäº Avalonia UI å’Œ SukiUI
- ğŸ”§ **é«˜åº¦å¯é…ç½®** - é€šè¿‡ JSON é…ç½®æ–‡ä»¶è‡ªå®šä¹‰
- ğŸš€ **è‡ªåŠ¨åŒ–æ„å»º** - GitHub Actions æ”¯æŒ
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ** - æ”¯æŒä¸­æ–‡ã€è‹±æ–‡ç­‰å¤šç§è¯­è¨€

## ğŸ“‹ ç³»ç»Ÿéœ€æ±‚

### è¿è¡Œç¯å¢ƒ
- **.NET 8.0 è¿è¡Œæ—¶** ï¼ˆå¿…éœ€ï¼‰
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+, æˆ–ç°ä»£ Linux å‘è¡Œç‰ˆ
- **å†…å­˜**: è‡³å°‘ 512MB RAM
- **å­˜å‚¨**: è‡³å°‘ 100MB å¯ç”¨ç©ºé—´

### å¼€å‘ç¯å¢ƒï¼ˆå¦‚æœè¦ä¿®æ”¹ä»£ç ï¼‰
- **.NET 8.0 SDK**
- **Visual Studio 2022** æˆ– **JetBrains Rider** æˆ– **VS Code**

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä¸‹è½½é¢„æ„å»ºç‰ˆæœ¬ï¼ˆæ¨èæ–°æ‰‹ï¼‰

1. **è®¿é—® Releases é¡µé¢**
   ```
   https://github.com/Yibael/MFAAvalonia/releases
   ```

2. **ä¸‹è½½é€‚åˆä½ ç³»ç»Ÿçš„ç‰ˆæœ¬**
   - Windows: `MFAAvalonia-win-x64.zip`
   - macOS: `MFAAvalonia-osx-x64.zip` æˆ– `MFAAvalonia-osx-arm64.zip`
   - Linux: `MFAAvalonia-linux-x64.zip`

3. **è§£å‹å¹¶è¿è¡Œ**
   ```bash
   # Windows
   # åŒå‡» MFAAvalonia.exe æˆ–è¿è¡Œ start.bat
   
   # macOS/Linux
   chmod +x MFAAvalonia
   ./MFAAvalonia
   # æˆ–è¿è¡Œ ./start.sh
   ```

### æ–¹å¼äºŒï¼šä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ„å»º

#### ğŸ“ å‡†å¤‡å·¥ä½œ

1. **Fork è¿™ä¸ªä»“åº“** åˆ°ä½ çš„ GitHub è´¦æˆ·
2. **å…‹éš†åˆ°æœ¬åœ°**
   ```bash
   git clone https://github.com/ä½ çš„ç”¨æˆ·å/MFAAvalonia.git
   cd MFAAvalonia
   ```

#### ğŸ”§ é…ç½® GitHub Actions

##### æ­¥éª¤ 1: ä¿®æ”¹ install.yml

æ‰“å¼€ `.github/workflows/install.yml` æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š

```yaml
# æ‰¾åˆ°ç¬¬ 75 è¡Œå·¦å³ï¼Œä¿®æ”¹ä»“åº“ä¿¡æ¯
- name: Download MFAAvalonia
  uses: robinraju/release-downloader@v1
  with:
    repository: ä½ çš„ç”¨æˆ·å/ä½ çš„é¡¹ç›®å  # â† ä¿®æ”¹è¿™é‡Œ
    fileName: "MFAAvalonia-*-..."
    # ... å…¶ä»–é…ç½®ä¿æŒä¸å˜
```

```yaml
# æ‰¾åˆ°ç¬¬ 116 è¡Œå·¦å³ï¼Œä¿®æ”¹æ„å»ºäº§ç‰©åç§°  
- uses: actions/upload-artifact@v4
  with:
    name: ä½ çš„é¡¹ç›®å-${{ matrix.os }}-${{ matrix.arch }}  # â† ä¿®æ”¹è¿™é‡Œ
    path: "install"
```

##### æ­¥éª¤ 2: é…ç½®æƒé™

1. è¿›å…¥ä½ çš„ GitHub ä»“åº“è®¾ç½®
2. ç‚¹å‡» **Settings** â†’ **Actions** â†’ **General**
3. åœ¨ **Workflow permissions** éƒ¨åˆ†é€‰æ‹©ï¼š
   - âœ… **Read and write permissions**
   - âœ… **Allow GitHub Actions to create and approve pull requests**

##### æ­¥éª¤ 3: è§¦å‘æ„å»º

```bash
# æäº¤æ›´æ”¹
git add .
git commit -m "é…ç½® GitHub Actions"
git push origin main

# åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾æ¥è§¦å‘æ­£å¼æ„å»º
git tag v1.0.0
git push origin v1.0.0
```

## ğŸ“ é¡¹ç›®é…ç½®

### interface.json é…ç½®æ–‡ä»¶

è¿™æ˜¯ MFAAvalonia çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†èµ„æºè·¯å¾„å’Œä»»åŠ¡ï¼š

```json
{
  "name": "æˆ‘çš„MAAé¡¹ç›®",
  "version": "1.0.0", 
  "url": "https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„é¡¹ç›®",
  "custom_title": "æˆ‘çš„MAAé¡¹ç›®",
  "mirrorchyan_rid": "M9A",  // Mirroré…±é¡¹ç›®IDï¼ˆå¯é€‰ï¼‰
  "resource": [
    {
      "name": "å®˜æœ",
      "path": "{PROJECT_DIR}/resource/base"
    },
    {
      "name": "Bæœ", 
      "path": [
        "{PROJECT_DIR}/resource/base",
        "{PROJECT_DIR}/resource/bilibili"
      ]
    }
  ],
  "task": [
    {
      "name": "æ—¥å¸¸ä»»åŠ¡",
      "entry": "DailyTask",
      "check": true,          // é»˜è®¤é€‰ä¸­
      "doc": "æ‰§è¡Œæ—¥å¸¸åˆ·å›¾ä»»åŠ¡",
      "repeatable": true,     // å¯é‡å¤æ‰§è¡Œ
      "repeat_count": 1       // é»˜è®¤é‡å¤æ¬¡æ•°
    },
    {
      "name": "æ´»åŠ¨ä»»åŠ¡", 
      "entry": "EventTask",
      "check": false,
      "doc": "[color:blue]é™æ—¶æ´»åŠ¨ä»»åŠ¡[/color]"
    }
  ]
}
```

### ğŸ¨ æ–‡æ¡£æ ¼å¼åŒ–

åœ¨ `doc` å­—æ®µä¸­å¯ä»¥ä½¿ç”¨å¯Œæ–‡æœ¬æ ¼å¼ï¼š

```json
{
  "doc": "[color:red]é‡è¦æç¤º[/color]\n[b]ç²—ä½“æ–‡å­—[/b]\n[i]æ–œä½“æ–‡å­—[/i]\n[u]ä¸‹åˆ’çº¿[/u]"
}
```

æ”¯æŒçš„æ ‡è®°ï¼š
- `[color:red]æ–‡å­—[/color]` - é¢œè‰²
- `[b]æ–‡å­—[/b]` - ç²—ä½“
- `[i]æ–‡å­—[/i]` - æ–œä½“  
- `[u]æ–‡å­—[/u]` - ä¸‹åˆ’çº¿
- `[s]æ–‡å­—[/s]` - åˆ é™¤çº¿
- `[align:center]æ–‡å­—[/align]` - å¯¹é½æ–¹å¼

### ğŸŒ å¤šè¯­è¨€æ”¯æŒ

åˆ›å»º `lang` æ–‡ä»¶å¤¹ï¼Œæ·»åŠ è¯­è¨€æ–‡ä»¶ï¼š

```
lang/
â”œâ”€â”€ zh-cn.json  // ç®€ä½“ä¸­æ–‡
â”œâ”€â”€ zh-tw.json  // ç¹ä½“ä¸­æ–‡  
â””â”€â”€ en-us.json  // è‹±æ–‡
```

**zh-cn.json ç¤ºä¾‹ï¼š**
```json
{
  "DailyTask": "æ—¥å¸¸ä»»åŠ¡",
  "EventTask": "æ´»åŠ¨ä»»åŠ¡",
  "task_description": "è¿™æ˜¯ä»»åŠ¡æè¿°"
}
```

ç„¶ååœ¨ `interface.json` ä¸­ä½¿ç”¨é”®åï¼š
```json
{
  "task": [
    {
      "name": "DailyTask",  // å°†è‡ªåŠ¨æ ¹æ®è¯­è¨€æ˜¾ç¤ºå¯¹åº”ç¿»è¯‘
      "entry": "DailyTask",
      "doc": "task_description"
    }
  ]
}
```

## ğŸ”§ é«˜çº§é…ç½®

### å®éªŒæ€§åŠŸèƒ½ï¼šAdvanced å­—æ®µ

å…è®¸ç”¨æˆ·é€šè¿‡ç•Œé¢è¾“å…¥æ¡†è‡ªå®šä¹‰å‚æ•°ï¼š

```json
{
  "task": [
    {
      "name": "è‡ªå®šä¹‰ä»»åŠ¡",
      "entry": "CustomTask", 
      "advanced": ["è®¾ç½®A", "è®¾ç½®B"]
    }
  ],
  "advanced": {
    "è®¾ç½®A": {
      "field": "image_name",
      "type": "string", 
      "default": "target.png",
      "pipeline_override": {
        "CustomTask": {
          "template": "{image_name}"
        }
      }
    },
    "è®¾ç½®B": {
      "field": ["x", "y"],
      "type": ["int", "int"],
      "default": ["100", "200"],
      "pipeline_override": {
        "CustomTask": {
          "roi": ["{x}", "{y}", 50, 50]
        }
      }
    }
  }
}
```

## ğŸ› ï¸ å¼€å‘å’Œè°ƒè¯•

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/Yibael/MFAAvalonia.git
   cd MFAAvalonia
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   dotnet restore
   ```

3. **è¿è¡Œé¡¹ç›®**
   ```bash
   dotnet run --project MFAAvalonia
   ```

### è°ƒè¯•é…ç½®

å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶ï¼š
```bash
# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
./MFAAvalonia -c my_config

# è¿™ä¼šåŠ è½½ my_config.json è€Œä¸æ˜¯é»˜è®¤çš„ interface.json
```

## â— å¸¸è§é—®é¢˜

### Q: GitHub Actions æ„å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®è®¤ä¿®æ”¹äº†æ­£ç¡®çš„ä»“åº“åç§°
2. æ£€æŸ¥ Actions æƒé™è®¾ç½®
3. æŸ¥çœ‹æ„å»ºæ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯ä¿¡æ¯
4. ç¡®ä¿ `install.py` è„šæœ¬å­˜åœ¨ä¸”å¯æ‰§è¡Œ

### Q: ç¨‹åºå¯åŠ¨æ—¶æç¤ºç¼ºå°‘ .NET è¿è¡Œæ—¶ï¼Ÿ

**A:** 
```bash
# Windows (ä½¿ç”¨ winget)
winget install Microsoft.DotNet.Runtime.8

# macOS (ä½¿ç”¨ Homebrew)
brew install --cask dotnet

# Linux (Ubuntu/Debian)
sudo apt-get update
sudo apt-get install -y dotnet-runtime-8.0
```

### Q: å¦‚ä½•æ·»åŠ è‡ªå·±çš„ MAA èµ„æºï¼Ÿ

**A:**
1. å°† MAA é¡¹ç›®çš„ `assets/resource` å†…å®¹å¤åˆ¶åˆ° `resource/` ç›®å½•
2. å°† `assets/interface.json` å¤åˆ¶åˆ°æ ¹ç›®å½•
3. æ ¹æ®ä¸Šé¢çš„è¯´æ˜ä¿®æ”¹ `interface.json`

### Q: å¦‚ä½•è‡ªå®šä¹‰ç¨‹åºå›¾æ ‡å’Œåç§°ï¼Ÿ

**A:**
1. ä¿®æ”¹ `interface.json` ä¸­çš„ `name` å’Œ `custom_title` å­—æ®µ
2. æ›¿æ¢ `Assets/logo.ico` æ–‡ä»¶
3. é‡æ–°æ„å»ºé¡¹ç›®

### Q: æ”¯æŒå“ªäº› MAA ç‰ˆæœ¬ï¼Ÿ

**A:** æ”¯æŒåŸºäº **MaaFramework** çš„é¡¹ç›®ï¼Œç‰ˆæœ¬å…¼å®¹æ€§ï¼š
- MaaFramework v1.0.0+
- MFAAvalonia v1.1.6+ ç§»é™¤äº†æ—§çš„ focus å­—æ®µï¼Œä½¿ç”¨æ–°çš„ any focus æ ¼å¼

## ğŸ”— ç›¸å…³é“¾æ¥

- **é¡¹ç›®ä¸»é¡µ**: https://github.com/Yibael/MFAAvalonia
- **MaaFramework**: https://github.com/MaaXYZ/MaaFramework  
- **Avalonia UI**: https://github.com/AvaloniaUI/Avalonia
- **SukiUI**: https://github.com/kikipoulet/SukiUI
- **Mirroré…±**: https://mirrorchyan.com/

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **GPL-3.0** è®¸å¯è¯å¼€æºã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯: `git checkout -b my-new-feature`  
3. æäº¤æ›´æ”¹: `git commit -am 'Add some feature'`
4. æ¨é€åˆ†æ”¯: `git push origin my-new-feature`
5. æäº¤ Pull Request

---

*æœ€åæ›´æ–°: 2025å¹´9æœˆ23æ—¥*